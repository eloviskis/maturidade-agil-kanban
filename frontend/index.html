<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AvaliaÃ§Ã£o de Maturidade Ãgil - Kanban</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ AvaliaÃ§Ã£o de Maturidade Ãgil</h1>
            <p>Metodologia Kanban - Sistema Multi-Avaliador com HistÃ³rico</p>
        </div>

        <div class="content">
            <!-- Menu Principal -->
            <div id="mainMenu" class="mode-selector">
                <h2>Selecione o Modo de OperaÃ§Ã£o</h2>
                <div class="mode-buttons">
                    <button class="btn-mode" onclick="app.showEvaluationForm()">
                        ğŸ“ Fazer AvaliaÃ§Ã£o<br>
                        <small>Responder questionÃ¡rio</small>
                    </button>
                    <button class="btn-mode" onclick="app.showConsolidatedView()">
                        ğŸ“Š Ver Resultado Consolidado<br>
                        <small>MÃ©dia do time no ciclo</small>
                    </button>
                    <button class="btn-mode" onclick="app.showHistoryView()">
                        ğŸ“ˆ Ver EvoluÃ§Ã£o HistÃ³rica<br>
                        <small>Comparar ciclos</small>
                    </button>
                    <button class="btn-mode" onclick="app.showDashboard()">
                        ğŸ¯ Dashboard Geral<br>
                        <small>Todos os times</small>
                    </button>
                    <button class="btn-mode" onclick="app.showAdminLogin()">
                        ğŸ” Ãrea Admin<br>
                        <small>Gerenciar avaliaÃ§Ãµes</small>
                    </button>
                </div>
            </div>

            <!-- FormulÃ¡rio de AvaliaÃ§Ã£o -->
            <div id="evaluationSection" style="display: none;">
                <!-- Seletor de Tipo de AvaliaÃ§Ã£o -->
                <div class="evaluation-type-selector">
                    <h3>Escolha o Tipo de AvaliaÃ§Ã£o:</h3>
                    <div class="type-buttons">
                        <button class="btn-type active" data-type="kanban" onclick="app.switchEvaluationType('kanban')">
                            ğŸ“‹ AvaliaÃ§Ã£o Kanban<br>
                            <small>24 questÃµes focadas em Kanban</small>
                        </button>
                        <button class="btn-type" data-type="jornada" onclick="app.switchEvaluationType('jornada')">
                            ğŸ§­ Jornada Ãgil<br>
                            <small>40 questÃµes completas</small>
                        </button>
                    </div>
                </div>

                <div class="team-info-section">
                    <label for="teamSelect">Selecione o Time:</label>
                    <select id="teamSelect">
                        <option value="">-- Carregando times... --</option>
                    </select>

                    <label for="evaluatorName">Seu Nome:</label>
                    <input type="text" id="evaluatorName" placeholder="Digite seu nome completo">

                    <label for="cycleSelect">Ciclo de AvaliaÃ§Ã£o:</label>
                    <select id="cycleSelect">
                        <option value="">-- Carregando ciclos... --</option>
                    </select>

                    <div class="info-box">
                        <p>ğŸ’¡ <strong>Importante:</strong> Sua avaliaÃ§Ã£o serÃ¡ salva no banco de dados e combinada com as avaliaÃ§Ãµes de outros membros do time.</p>
                    </div>
                </div>

                <div class="error-message" id="errorMessage"></div>

                <div id="questionsContainer">
                    <!-- As questÃµes serÃ£o carregadas via JavaScript -->
                </div>

                <div class="submit-section">
                    <button type="button" class="btn-submit" onclick="app.submitEvaluation()">ğŸ’¾ Salvar Minha AvaliaÃ§Ã£o</button>
                    <button type="button" class="btn-back" onclick="app.backToMenu()">ğŸ  Voltar</button>
                </div>
            </div>

            <!-- VisualizaÃ§Ã£o Consolidada -->
            <div id="consolidatedSection" style="display: none;">
                <!-- Seletor de Tipo de VisualizaÃ§Ã£o -->
                <div class="evaluation-type-selector">
                    <h3>Tipo de AvaliaÃ§Ã£o:</h3>
                    <div class="type-buttons">
                        <button class="btn-type active" data-type="kanban" onclick="app.switchViewType('kanban')">
                            ğŸ“‹ Kanban (24 questÃµes)
                        </button>
                        <button class="btn-type" data-type="jornada" onclick="app.switchViewType('jornada')">
                            ğŸ§­ Jornada Ãgil (40 questÃµes)
                        </button>
                    </div>
                </div>

                <div class="team-selector-section">
                    <label for="viewTeamSelect">Selecione o Time:</label>
                    <select id="viewTeamSelect" onchange="app.updateCyclesForView()">
                        <option value="">-- Selecione um time --</option>
                    </select>

                    <label for="viewCycleSelect">Selecione o Ciclo:</label>
                    <select id="viewCycleSelect" onchange="app.loadConsolidatedReport()">
                        <option value="">-- Selecione um ciclo --</option>
                    </select>

                    <button class="btn-mode" onclick="app.loadConsolidatedReport()">ğŸ“Š Carregar RelatÃ³rio</button>
                </div>

                <div id="consolidatedReport"></div>

                <div class="submit-section">
                    <button class="btn-back" onclick="app.backToMenu()">ğŸ  Voltar ao Menu</button>
                </div>
            </div>

            <!-- VisualizaÃ§Ã£o de HistÃ³rico -->
            <div id="historySection" style="display: none;">
                <div class="team-selector-section">
                    <label for="historyTeamSelect">Selecione o Time:</label>
                    <select id="historyTeamSelect" onchange="app.loadHistory()">
                        <option value="">-- Selecione um time --</option>
                    </select>

                    <button class="btn-mode" onclick="app.loadHistory()">ğŸ“ˆ Carregar HistÃ³rico</button>
                </div>

                <div id="historyReport"></div>

                <div class="submit-section">
                    <button class="btn-back" onclick="app.backToMenu()">ğŸ  Voltar ao Menu</button>
                </div>
            </div>

            <!-- Dashboard Geral -->
            <div id="dashboardSection" style="display: none;">
                <div id="dashboardReport"></div>

                <div class="submit-section">
                    <button class="btn-back" onclick="app.backToMenu()">ğŸ  Voltar ao Menu</button>
                </div>
            </div>

            <!-- Ãrea Admin - Login -->
            <div id="adminLoginSection" style="display: none;">
                <div class="admin-login">
                    <h2>ğŸ” Acesso Administrativo</h2>
                    <div class="error-message" id="adminLoginError"></div>
                    
                    <div class="team-info-section">
                        <label for="adminEmail">Email:</label>
                        <input type="email" id="adminEmail" placeholder="admin@example.com" value="admin@example.com">

                        <label for="adminPassword">Senha:</label>
                        <input type="password" id="adminPassword" placeholder="Digite sua senha">
                    </div>

                    <div class="submit-section">
                        <button class="btn-submit" onclick="app.adminLogin()">ğŸ”“ Entrar</button>
                        <button class="btn-back" onclick="app.backToMenu()">ğŸ  Voltar</button>
                    </div>
                </div>
            </div>

            <!-- Ãrea Admin - Painel -->
            <div id="adminPanelSection" style="display: none;">
                <div class="admin-header">
                    <h2>ğŸ› ï¸ Painel Administrativo</h2>
                    <button class="btn-logout" onclick="app.adminLogout()">ğŸšª Sair</button>
                </div>

                <div class="admin-tabs">
                    <button class="admin-tab active" onclick="app.showAdminTab('evaluations')">ğŸ“‹ AvaliaÃ§Ãµes</button>
                    <button class="admin-tab" onclick="app.showAdminTab('participation')">ğŸ‘¥ ParticipaÃ§Ã£o</button>
                    <button class="admin-tab" onclick="app.showAdminTab('stats')">ğŸ“Š EstatÃ­sticas</button>
                </div>

                <!-- Tab: AvaliaÃ§Ãµes -->
                <div id="adminTabEvaluations" class="admin-tab-content">
                    <div class="admin-actions">
                        <button class="btn-danger" onclick="app.adminDeleteAllEvaluations()">ğŸ—‘ï¸ Zerar Todas as AvaliaÃ§Ãµes</button>
                    </div>
                    <div id="adminEvaluationsList"></div>
                </div>

                <!-- Tab: ParticipaÃ§Ã£o -->
                <div id="adminTabParticipation" class="admin-tab-content" style="display: none;">
                    <div class="team-info-section">
                        <label for="adminParticipationTeam">Time:</label>
                        <select id="adminParticipationTeam" onchange="app.loadAdminParticipation()">
                            <option value="">-- Selecione um time --</option>
                        </select>

                        <label for="adminParticipationCycle">Ciclo:</label>
                        <select id="adminParticipationCycle" onchange="app.loadAdminParticipation()">
                            <option value="">-- Selecione um ciclo --</option>
                        </select>

                        <label for="adminParticipationType">Tipo:</label>
                        <select id="adminParticipationType" onchange="app.loadAdminParticipation()">
                            <option value="">Todos</option>
                            <option value="kanban">Kanban</option>
                            <option value="jornada">Jornada Ãgil</option>
                        </select>
                    </div>
                    <div id="adminParticipationReport"></div>
                </div>

                <!-- Tab: EstatÃ­sticas -->
                <div id="adminTabStats" class="admin-tab-content" style="display: none;">
                    <div id="adminStatsReport"></div>
                </div>

                <div class="submit-section">
                    <button class="btn-back" onclick="app.backToMenu()">ğŸ  Voltar ao Menu</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
